# 项目启动说明

## 环境要求
- Java 17+
- MySQL 8.0+
- Maven 3.6+

## 快速启动步骤

### 1. 准备数据库
```bash
# 登录MySQL
mysql -u root -p

# 创建数据库（如果不存在）
CREATE DATABASE IF NOT EXISTS db_news_system DEFAULT CHARACTER SET utf8;

# 使用数据库
USE db_news_system;

# 执行原始数据库脚本
SOURCE news_publish_system.sql;

# 执行文件管理功能脚本
SOURCE tb_file_schema.sql;
```

### 2. 修改数据库配置（如果需要）
编辑 `src/main/resources/application.properties` 文件：
```properties
# 如果数据库密码不是空，请修改这一行
spring.datasource.password=dcaudfjw@2025
```

### 3. 启动应用
```bash
# 进入项目目录
cd springboot-project-news-publish-system

# 编译项目
mvn clean compile

# 启动应用
mvn spring-boot:run
```

### 4. 访问应用
- 主应用: http://localhost:8080
- 文件管理测试页面: http://localhost:8080/file-test.html
- 文件管理API: http://localhost:8080/api/file/list

## 常见问题

### 1. 数据库连接失败
- 检查MySQL服务是否启动
- 检查数据库用户名密码是否正确
- 检查数据库是否创建

### 2. 端口被占用
修改 `application.properties` 中的端口：
```properties
server.port=8081
```

### 3. 编译错误
确保使用Java 17：
```bash
java -version
```

## API测试

### 使用curl测试
```bash
# 获取文件列表
curl http://localhost:8080/api/file/list

# 获取配置信息
curl http://localhost:8080/api/file/config

# 按类型查询文件
curl http://localhost:8080/api/file/list/type/image%2Fjpeg

# 按名称查询文件
curl "http://localhost:8080/api/file/list/name?fileName=test"
```

### 使用Postman测试
1. 导入以下API集合：
   - GET http://localhost:8080/api/file/list
   - GET http://localhost:8080/api/file/config
   - GET http://localhost:8080/api/file/list/type/{fileType}
   - GET http://localhost:8080/api/file/list/name?fileName={fileName}
   - POST http://localhost:8080/api/file/add
   - DELETE http://localhost:8080/api/file/delete/{fileId}

## 项目结构
```
src/main/java/com/site/springboot/core/
├── controller/
│   └── FileController.java          # 文件管理控制器
├── service/
│   ├── FileService.java             # 文件服务接口
│   └── impl/
│       └── FileServiceImpl.java     # 文件服务实现
├── dao/
│   └── FileDao.java                 # 文件数据访问接口
├── entity/
│   └── File.java                    # 文件实体类
└── config/
    └── Constants.java               # 配置常量

src/main/resources/
├── mapper/
│   └── FileDao.xml                  # MyBatis映射文件
├── static/
│   └── file-test.html               # 测试页面
└── application.properties           # 应用配置

tb_file_schema.sql                   # 文件表创建脚本
```

## 功能验证
启动应用后，访问 http://localhost:8080/file-test.html 可以看到完整的文件管理功能测试界面，包括：
- 数据库配置信息显示
- 文件列表查询
- 按类型和名称查询
- 文件添加和删除操作 